<T3DataStructure>
    <sheets>
        <sDEF>
            <ROOT>
                <TCEforms>
                    <sheetTitle>Options</sheetTitle>
                </TCEforms>
                <type>array</type>
                <el>
                    <!-- Here we test if
                                a) various types show the allowed file extension in the form / link browser
                                and
                                b) if it is possible to deactivate "Add new media asset" in the link browser.
                                c) If it is possible to deativate "additional link parameters"
                    -->


                    <!--
                    1. type="input" renderType = "inputLink"
                    Problems
                    a) allowed extension (.png) not displayed in form and in link brwoser
                    b) Not possible to deactivate "Add new media asset"
                    -->
                    <settings.inputLink>
                        <TCEforms>
                            <label>1. Enter a file as URL or as file (.png) - uses type="input", renderType="inputLink"</label>
                            <config>
                                <type>input</type>

                                <renderType>inputLink</renderType>
                                <!-- does not work, trying to not display "Add new media asset"
                                    is not supported for type="input"
                                    https://docs.typo3.org/c/typo3/cms-core/main/en-us/Changelog/10.1/Feature-84250-SeparatelyEnableDisableAddMediaByURLAndSelectUploadFiles.html
                                    https://gitlab.uni-oldenburg.de/it-dienste/typo3/typo3-uol.de/-/issues/792
                                    -->
                                <!--
                                <appearance>
                                    <fileByUrlAllowed>false</fileByUrlAllowed>
                                </appearance>
                                -->
                                <fieldControl>
                                    <linkPopup>
                                        <options>
                                            <allowedExtensions>png</allowedExtensions>
                                            <!-- Comma separated list of link fields that should not be displayed.
                                            Possible values are class, params, target and title.
                                            By default, all link fields are displayed.-->
                                            <!-- see AbstractLinkHandler:
                                            'target', 'title', 'class', 'params', 'rel'
                                             -->
                                            <blindLinkFields>class,params,target,title,rel</blindLinkFields>
                                            <!-- what link types NOT to show -->
                                            <blindLinkOptions>page,mail,telephone,folder,tx_calendarize_domain_model_event,news</blindLinkOptions>
                                            <!-- title von Button, nicht Link Browser !!! -->
                                            <title>Bibtex Datei ausw√§hlen</title>

                                        </options>
                                    </linkPopup>
                                </fieldControl>
                            </config>
                        </TCEforms>
                    </settings.inputLink>

                    <!-- 2. type="link" (since v12)
                    https://docs.typo3.org/m/typo3/reference-tca/main/en-us/ColumnsConfig/Type/Link/Index.html#columns-link
                    Problems
                    a) allowed extension (.png) not displayed in form and in link brwoser
                    b) Not possible to deactivate "Add new media asset"
                     -->
                    <settings.link>
                        <TCEforms>
                            <label>2. Enter a file as URL or as file (.png) - uses type="link" (since v12)</label>
                            <config>
                                <type>link</type>
                                <!-- is not a csv string (as before), but an array!!! -->
                                <allowedTypes>
                                    <numIndex index="0">file</numIndex>
                                    <numIndex index="1">url</numIndex>
                                </allowedTypes>
                                <appearance>
                                    <enableBrowser>true</enableBrowser>
                                    <browserTitle>Select file or URL</browserTitle>

                                    <!-- is not a csv string (as before), but an array!!! -->
                                    <allowedFileExtensions>
                                        <numIndex index="0">png</numIndex>
                                    </allowedFileExtensions>

                                    <!-- !!! important, <allowedOptions must contain the numIndex, just using
                                      <allowedOption></allowedOption> is not sufficient
                                      -->
                                    <allowedOptions>
                                        <numIndex index="0"></numIndex>
                                    </allowedOptions>
                                </appearance>
                            </config>
                        </TCEforms>
                    </settings.link>


                    <!--
                    3. type="file"
                    https://docs.typo3.org/m/typo3/reference-tca/main/en-us/ColumnsConfig/Type/File/Index.html

                    Behaviour
                    a) ok: Here, the allowed extension (.png) IS displayed in form and in link browser
                    b) ok: "Add new media asset" is not displayed
                    c) ok: "Additional link parameters" is not displayed
                    -->
                    <settings.file>
                        <TCEforms>
                            <label>3. Select a file (.png) - uses type="file"</label>
                            <config>
                                <type>file</type>
                                <maxitems>1</maxitems>
                                <allowed>png</allowed>
                            </config>
                        </TCEforms>
                    </settings.file>

                    <!--
                    4. type="line"

                    "Inline fields should not be used anymore to handle files. Use the TCA column type file instead."
                    https://docs.typo3.org/m/typo3/reference-tca/main/en-us/ColumnsConfig/Type/Inline/Index.html
                    -->
                    <!--
                    <settings.inline>
                        <TCEforms>
                            <label>4. Enter a file as URL or as file (.png) - uses type="inline"</label>
                            <config>
                                <type>inline</type>

                            </config>
                        </TCEforms>
                    </settings.inline>
                    -->
                </el>
            </ROOT>
        </sDEF>
    </sheets>
</T3DataStructure>
